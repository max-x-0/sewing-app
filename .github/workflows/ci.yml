name: CI (Build & Test)

on:
  push:
    branches: ["main"]
  pull_request:
    branches: ["main"]

jobs:
  build_and_test:
    runs-on: ubuntu-latest

    steps:
      - name: 1. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–¥—É
        uses: actions/checkout@v3

      - name: 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è PHP (8.1)
        uses: shivammathur/setup-php@v2
        with:
          php-version: "8.1"

      - name: 3. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Composer –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
        run: composer install --prefer-dist --no-progress

      - name: 4. –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤ (PHPUnit) üß™
        run: composer run test
